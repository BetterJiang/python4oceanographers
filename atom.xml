<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>python4oceanographers</title><link href="http://ocefpaf.github.io/python4oceanographers/" rel="alternate"></link><link href="/atom.xml" rel="self"></link><id>http://ocefpaf.github.io/python4oceanographers/</id><updated>2013-06-03T04:03:00-03:00</updated><entry><title>Removing spikes from CTD data -- Part 2</title><link href="http://ocefpaf.github.io/python4oceanographers/blog/2013/06/03/hydrography/" rel="alternate"></link><updated>2013-06-03T04:03:00-03:00</updated><author><name>Filipe Fernandes</name></author><id>tag:ocefpaf.github.io/python4oceanographers,2013-06-03:blog/2013/06/03/hydrography/</id><summary type="html">&lt;p&gt;CTD data main contain, in general, two different types of spikes:
&lt;em&gt; Bad data from electrical failures.  Usually it manifest in all the measured
  variables (Temperature, Conductivity, Oxygen, etc);
&lt;/em&gt; Salinity spikes due to a wrong temperature value when computing it from
  conductivity.  This effect may be due to a a bad Alignment of the temperature
  and conductivity sensors or poor Cell thermal mass correction.
  For more information check Lueck, R.G., 1990: Thermal Inertia of Conductivity
  Cells: Theory., American Meteorological Society Oct 1990, 741-755.&lt;/p&gt;</summary><category term="CTD"></category><category term="hydrography"></category></entry><entry><title>Removing spikes from CTD data -- Part 1</title><link href="http://ocefpaf.github.io/python4oceanographers/blog/2013/05/26/hydrography/" rel="alternate"></link><updated>2013-05-26T07:19:00-03:00</updated><author><name>Filipe Fernandes</name></author><id>tag:ocefpaf.github.io/python4oceanographers,2013-05-26:blog/2013/05/26/hydrography/</id><summary type="html">&lt;p&gt;&lt;a href="http://pandas.pydata.org/"&gt;Pandas&lt;/a&gt; is an amazing python module to deal with
data.  It has tons of features worthwhile learning, but the best of all is how
quick one can explore a data with just a few code lines once you learn the
basics.&lt;/p&gt;
&lt;p&gt;For that purpose I wrote a small &lt;a href="http://code.google.com/p/python-oceans/source/browse/oceans/ctd/ctd.py#619"&gt;module&lt;/a&gt;
to read CTD (also XBT's EDF and FSI's CTD format) data directly as a pandas DataFrame.&lt;/p&gt;</summary><category term="CTD"></category><category term="pandas"></category></entry><entry><title>Dealing with spiky data</title><link href="http://ocefpaf.github.io/python4oceanographers/blog/2013/05/20/data/" rel="alternate"></link><updated>2013-05-20T22:58:00-03:00</updated><author><name>Filipe Fernandes</name></author><id>tag:ocefpaf.github.io/python4oceanographers,2013-05-20:blog/2013/05/20/data/</id><summary type="html">&lt;p&gt;The first steps to clean a data-set is to remove outliers (or spikes).  Some
spikes are easy to spot with a simple histogram of the data.  Let's take a look
at a velocity time-series with some bad data.&lt;/p&gt;
&lt;p&gt;{% notebook spikey_data.ipynb cells[3:4] %}&lt;/p&gt;
&lt;p&gt;Can you see the bins that separate themselves from the rest?  Those are
probably spikes.  It is common practice to use a criteria of labeling the data
$3\times \sigma$ larger than the mean as outliers.  However, some spikes might
be "hidden" within the data limits, or one can remove good data together with
bad data if the data is highly variable (or episodic systems).  For a better
discussion on this topic check out Chapter 2 from Emery and Thomson -- Data
Analysis Methods in Physical Oceanography.&lt;/p&gt;
&lt;p&gt;One solution is a "two(or more)-pass" criteria.  Also, one might wish to
evaluate small chunks of the data separately.  Here is an example:&lt;/p&gt;
&lt;p&gt;{% notebook spikey_data.ipynb cells[1:2] %}&lt;/p&gt;
&lt;p&gt;The first compute the statistics of the data ($\mu$ and $\sigma$) and marks
(but do not exclude yet) data that deviates more than $n1 \times \sigma$ from
the mean.  The second pass recompute the data statistics but now removing the
data that deviates more than $n2 \times \sigma$ from the mean.&lt;/p&gt;
&lt;p&gt;The code above makes use of &lt;a href="http://stackoverflow.com/questions/4936620/using-strides-for-an-efficient-moving-average-filter" title="NumPy stride tricks"&gt;NumPy stride tricks&lt;/a&gt; to avoid loops while computing $\mu$ and $\sigma$ for each &lt;strong&gt;block&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;{% notebook spikey_data.ipynb cells[4:5] %}&lt;/p&gt;
&lt;p&gt;The "two-pass" method did well for &lt;em&gt;u&lt;/em&gt; while the $3\times \sigma$ criteria
failed not only to identify all the spikes, but also removed good data from the
time series.  On the other had, the $3\times \sigma$ criteria removed two bad
values from &lt;em&gt;v&lt;/em&gt; while the two pass could one find one.  Still both methods left
behind two small spikes on &lt;em&gt;v&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;There are probably better ways of doing this.  Also, there are methods that are
more statistically robust and more efficient at catching bad values.  Still,
the message of this post is not actually an algorithm to remove bad data, but:&lt;/p&gt;
&lt;p&gt;"To identify errors, it is necessary to examine all of the data in visual form
and to get a "feel" for the data."  -- directly from Emery and Thomson book.&lt;/p&gt;
&lt;p&gt;In other words, there is no silver bullet!&lt;/p&gt;
&lt;p&gt;http://www.johndcook.com/blog/2013/05/30/there-are-no-outliers/&lt;/p&gt;</summary><category term="plotting"></category><category term="spikes"></category></entry><entry><title>Using Basemap to plot points over a SST figure</title><link href="http://ocefpaf.github.io/python4oceanographers/blog/2013/05/13/mapping/" rel="alternate"></link><updated>2013-05-13T22:58:00-03:00</updated><author><name>Filipe Fernandes</name></author><id>tag:ocefpaf.github.io/python4oceanographers,2013-05-13:blog/2013/05/13/mapping/</id><summary type="html">&lt;p&gt;Plotting a hydrographic cruise over the latest Sea Surface Temperature can
help a lot with the interpretation of the data.&lt;/p&gt;
&lt;p&gt;So first lets define a handy function to generate the map:&lt;/p&gt;
&lt;p&gt;{% notebook plotting_over_image.ipynb cells[0:1] %}&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Now just download your SST image.&lt;/li&gt;
&lt;li&gt;Crop the image at known lon/lat corners.&lt;/li&gt;
&lt;li&gt;Plot your data!&lt;/li&gt;
&lt;/ul&gt;
&lt;p _="%" cells_1:2_="cells[1:2]" notebook="notebook" plotting_over_image.ipynb="plotting_over_image.ipynb"&gt;Here is the result:&lt;/p&gt;</summary><category term="plotting"></category><category term="basemap"></category><category term="georeference"></category></entry><entry><title>python4oceanographers</title><link href="http://ocefpaf.github.io/python4oceanographers/blog/2013/05/06/first-post/" rel="alternate"></link><updated>2013-05-06T13:37:00-03:00</updated><author><name>Filipe Fernandes</name></author><id>tag:ocefpaf.github.io/python4oceanographers,2013-05-06:blog/2013/05/06/first-post/</id><summary type="html">&lt;p&gt;I'll (try) to write here some code snippets to help analyze, visualize and
explore data in oceans sciences.&lt;/p&gt;
&lt;p&gt;Mostly this is a "notebook" for a future Data Analysis course.&lt;/p&gt;
&lt;p&gt;(This post is just a test.)&lt;/p&gt;
&lt;p&gt;Testing a full notebook:&lt;/p&gt;
&lt;p&gt;{% notebook SymPy.ipynb %}&lt;/p&gt;
&lt;p&gt;Now just some cells (from the same notebook):&lt;/p&gt;
&lt;p&gt;{% notebook SymPy.ipynb cells[5:6] %}&lt;/p&gt;
&lt;p&gt;Include code examples:&lt;/p&gt;
&lt;figure class='code'&gt;
&lt;figcaption&gt;&lt;span&gt;[Code test] hello_world.py&lt;/span&gt; &lt;a href='/static/code/hello_world.py'&gt;download&lt;/a&gt;&lt;/figcaption&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="cp"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="cp"&gt;# hello_world.py&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="cp"&gt;# purpose:&lt;/span&gt;
&lt;span class="cp"&gt;# author:   Filipe P. A. Fernandes&lt;/span&gt;
&lt;span class="cp"&gt;# e-mail:   ocefpaf@gmail&lt;/span&gt;
&lt;span class="cp"&gt;# web:      http:&lt;/span&gt;&lt;span class="c1"&gt;//ocefpaf.tiddlyspot.com/&lt;/span&gt;
&lt;span class="cp"&gt;# created:  09-May-2013&lt;/span&gt;
&lt;span class="cp"&gt;# modified: Thu 09 May 2013 03:03:13 PM BRT&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;
&lt;span class="cp"&gt;# obs:&lt;/span&gt;
&lt;span class="cp"&gt;#&lt;/span&gt;

&lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello World!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/figure&gt;

&lt;p&gt;Seems to work fine!&lt;/p&gt;</summary><category term="test-drive"></category></entry></feed>